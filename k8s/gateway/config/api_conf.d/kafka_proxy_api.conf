rewrite ^/api/match/enter/(.*)  /api/kafka-proxy/match-making/enter/$1;

location /api/kafka-proxy/ {

  access_log /var/log/nginx/kafka_proxy_api.log main;

  location /api/kafka-proxy/match-making {
    auth_request     /auth;
    proxy_pass http://kafka_proxy;
  }

  location = /auth {
    internal;
    proxy_pass              http://user:8080/user-service/auth/authenticate;
      proxy_pass_request_body off;
    proxy_set_header        Content-Length "";
    proxy_set_header        X-Original-URI $request_uri;
  }

  return 404; # Catch-all
}
